<html>
    <head>
        <title> The Map </title>
        <link rel="stylesheet" type="text/css" href="{{style}}">
    </head>

    <body>
        <div id="header"> 
            <h1> The Pitt Print Tracking Map </h1> 
            
            <select id="printer_type_selector" onchange="changeMapColor()"> 
                <option value="any"> Any </option> 
                <option value="black and white"> Black and White </option> 
                <option value="color"> Color </option> 
            </select>

            <button class="logout-btn" onclick="window.location.href='{{reference_to_logout}}'">
                Logout
            </button>
        </div> 

        <div class="section">
            <h2 id="section-title">All Pitt Printers</h2>

            <ul id="printers_ul"> 
                {% for printer in printers %}
                <li class="printers_li printer-card {% if printer.printer_type == 'Black & White' %}bnw{% elif printer.printer_type == 'Color' %}color{% endif %}">
                        <h3 class="printer-location">Printer Location: {{printer.printer_location}}
                        <h3>{{printer.printer_type}} Printer</h3> 
                        
                        {% if printer.printer_status == "Online" %}
                        <h3 class="status-badge status-online">Status: {{printer.printer_status}}</h3>   
                        {% else %}
                        <h3 class="status-badge status-offline">Status: {{printer.printer_status}}</h3>   
                        <h3 class="printer-issue">Printer Issue: {{printer.printer_issue}}</h3>
                        {% endif %}                        


                        <div class="card-buttons">
                            <a class="card" href="{{url_for('report_printer', printer_id=printer.id)}}">
                                <button class="btn btn-offline">Printer Offline?</button> 
                            </a>       
                        </div>          
                    </li> 
                {% endfor %}
            </ul> 
        </div> 

    </body> 
</html>

<script>
    function changeMapColor() {
        var color = document.getElementById("printer_type_selector").value;
        if (color == "black and white") {
            document.querySelectorAll(".color").forEach(function(element) {
                element.style.display = "none";
            });
            document.querySelectorAll(".bnw").forEach(function(element) {
                element.style.display = "list-item";
            });
        } else if (color == "color") {
            document.querySelectorAll(".bnw").forEach(function(element) {
                element.style.display = "none";
            });
            document.querySelectorAll(".color").forEach(function(element) {
                element.style.display = "list-item";
            });
        } else {
            document.querySelectorAll(".bnw").forEach(function(element) {
                element.style.display = "list-item";
            });
            document.querySelectorAll(".color").forEach(function(element) {
                element.style.display = "list-item";
            });
        }
    }
</script>

